1. Connect ssh to ec2 instance.

2. Install pptp by typing the following command
 sudo apt-get install pptpd

3. Modify the file pptpd.conf using the following command
 sudo nano /etc/pptpd.conf

4. Uncomment the following two lines and change the local ip    

address to your Instance's private ip from aws console.
 #localip 192.168.0.1
 #remoteip 192.168.0.234-238,192.168.0.245

5. Then save and exit the file.

6. Modify the file pptpd-options using the following command
 sudo nano /etc/ppp/pptpd-options

7. Uncomment the two lines under Networking and Routing section,  add open dns server ip 208.67.222.222 and 208.67.220.220 or you  can use google dns 8.8.8.8 and 8.8.4.4
 #ms-dns 10.0.0.1
 #ms-dns 10.0.0.2
   
8. Then save and exit the file.

9. Modify the file sysctl.conf using the following command
 sudo nano /etc/sysctl.conf

10. Uncomment the line 
 #net.ipv4.ip_forward=1

11. Then save and exit the file.

12. Now execute the command
    sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

13. Modify the file rc.local using the following command
 sudo nano /etc/rc.local

14. Add the following line above exit
 sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

15. Save and exit the file.

16. Now modify the file chap-secrets using the following command
 sudo nano /etc/ppp/chap-secrets

17. Write your user name under client, add server name pptpd under server, add password under secret, add * under ip ddresses if  you want to use the VPN from any where. If you use here only actual ip address then you only able to connect from that ip  address.

18. Now save and exit the file.

19. Now Restart your vpn server using the following command
    /etc/init.d/pptpd restart

20. Now rboot your running system using the command
 sudo reboot

21. Open the tcp port 1723 and 47 in your ec2 security group

22. Now click on add vpn from control panel - Internet  
Option  - connection - Add vpn

23. Add your public dns name in Internet address.

24. In destination name you can give your connection name and click  on create

25. Now you can find the name myvpn from the list of connection

26. Add user name and password which saved in chap-secrets file.

27. Now check your ip address from the link
 http://whatismyip.com
 
 sudo sysctl -p
 
iptables -I INPUT -p tcp --dport 1723 -m state --state NEW -j ACCEPT
iptables -I INPUT -p gre -j ACCEPT
iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE
iptables -I FORWARD -p tcp --tcp-flags SYN,RST SYN -s 10.0.0.0/24 -j TCPMSS  --clamp-mss-to-pmtu
sudo iptables-save

sudo iptables -P FORWARD ACCEPT
sudo iptables -P OUTPUT ACCEPT
sudo iptables-save